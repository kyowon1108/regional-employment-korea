## 전처리 파이프라인 설계(요약)

### 목적
- 지역(시군구)×연도 기준으로 다음 핵심 지표를 일관된 스키마로 통합합니다.
  - E-9 체류자 수 및 비율(인구/취업자 대비)
  - 경제활동지표(취업자, 실업자, 실업률, 고용률 등) 연간화
  - 인구구조(총인구, 15~64세 등) 요약
  - 보조: 산업구조(가능 시), 국토이용 비중(선택)

### 입력 데이터(현재 보유)
- `data/시군구별_E9_체류자(2014~2023).csv`
- `data/시군구별_경제활동인구_(2014~2023반기).csv`
- `data/성연령_및_가구주와의_관계별인구_시군구_2019.csv` ~ `2023.csv`
- `data/시군구별_산업소분류별_총괄_2015년.csv`(보조)
- `data/시∙도별_산업대분류별_종사자규모별_총괄_2020년.csv`(보조, 시도수준)
- `data/지적통계_행정구역별·지목별 국토이용현황_시군구 (2007 ~ 2024).csv`(선택)

### 공통 규칙
- 인코딩: `cp949` 로드, 결측치 `['X','-','']` 처리.
- 지역 칼럼 표준화: `region_si`, `region_sgg`, 가능 시 표준코드(`region_code`).
- 시간 표준화: 반기(`YYYY.1/2`,`YYYY.2/2`) → 연간(합 또는 평균).
- 단위 표준화: 명/천명/% 를 메타로 유지, 집계 시 일관성 적용.

### 연간화 집계 규칙
- 수준치(예: 인구, 취업자, 실업자, E-9): 반기 합계 → 연간값.
- 비율(예: 실업률, 고용률, 15~64세 고용률): 반기 단순평균(가중 불가 시).

### 산출물(예정)
- `data/processed/economy_activity_annual.csv`
- `data/processed/e9_annual.csv`
- `data/processed/population_summary.csv`
- `data/processed/merged_panel_2019_2023.csv`

### 디렉터리 구조(신규)
- `src/config/paths.py` 경로 상수 관리
- `src/utils/` 입출력/상수/공통 유틸
- `src/processors/` 데이터셋별 전처리 클래스
- `src/pipeline/pipeline_runner.py` 파이프라인 오케스트레이션
- `src/main_preprocess.py` 실행 스크립트

### 처리 단계(데이터셋별)
1) 경제활동인구(시군구, 반기): Long화 → 연간화(규칙 적용) → 저장
2) E-9 체류자(시군구, 연도): Long화 → 필요한 경우 '계' 기준 사용 → 저장
3) 인구(시군구, 연도별 파일): 요약치(총인구, 15~64세 등) 산출 → 저장
4) 병합: 2019~2023 교집합 기준 키(`region`, `year`)로 좌측조인 후 파생비율 산출

### 품질 점검
- 인코딩/결측 변환율, 커버리지(지역×연도), 연도 간 급변 플래그(|Δ|>50%)
- 논리검증(가능 시 남+여=계, 시군구 합=시도)

### 실행
- 가상환경 활성화 후 실행(사용자 수행):
  - `python -m src.main_preprocess`


